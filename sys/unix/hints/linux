#
# NetHack 3.6  linux $NHDT-Date: 1432512814 2015/05/25 00:13:34 $  $NHDT-Branch: master $:$NHDT-Revision: 1.12 $
# Copyright (c) Kenneth Lorber, Kensington, Maryland, 2007.
# NetHack may be freely redistributed.  See license for details. 
#
#-PRE
# Linux hints file
# This hints file provides a single-user tty build for Linux, specifically
# for Ubuntu dapper.

# 1. Which window system(s) should be included in this binary?
#WANT_WIN_TTY=1
#WANT_WIN_X11=1
#WANT_WIN_QT=1
WANT_WIN_SDL2=1
#WANT_WIN_CURSES=1

# 1a. What is the default window system?
#WANT_DEFAULT=tty
#WANT_DEFAULT=x11
#WANT_DEFAULT=Qt
WANT_DEFAULT=sdl2
#WANT_DEFAULT=curses


#PREFIX=/usr
PREFIX=$(wildcard ~)/nh/install
HACKDIR=$(PREFIX)/games/lib/$(GAME)dir
SHELLDIR = $(PREFIX)/games
INSTDIR=$(HACKDIR)
VARDIR = $(HACKDIR)



POSTINSTALL=cp -n sys/unix/sysconf $(INSTDIR)/sysconf; $(CHOWN) $(GAMEUID) $(INSTDIR)/sysconf; $(CHGRP) $(GAMEGRP) $(INSTDIR)/sysconf; chmod $(VARFILEPERM) $(INSTDIR)/sysconf;

CFLAGS=-g -O -I../include -DNOTPARMDECL $(CFLAGS1) -DDEFAULT_WINDOW_SYS=\"$(WANT_DEFAULT)\" -DDLB
CFLAGS1=-DCOMPRESS=\"/bin/gzip\" -DCOMPRESS_EXTENSION=\".gz\"
CFLAGS+=-DSYSCF -DSYSCF_FILE=\"$(HACKDIR)/sysconf\" -DSECURE
CFLAGS+=-DHACKDIR=\"$(HACKDIR)\"

LINK=$(CC)
# Only needed for GLIBC stack trace:
LFLAGS=-rdynamic

ifdef WANT_WIN_TTY
WINSRC += $(WINTTYSRC)
WINOBJ += $(WINTTYOBJ)
WINLIB += $(WINTTYLIB)

WINTTYLIB=-lcurses
else	# !WANT_WIN_TTY
CFLAGS += -DNOTTYGRAPHICS
endif	# !WANT_WIN_TTY

ifdef WANT_WIN_SDL2
CFLAGS += -DSDL2_GRAPHICS -DPOSITIONBAR `pkg-config --cflags pangoft2 SDL2_image` `sdl2-config --cflags`
WINSRC += $(WINSDL2SRC)
WINOBJ += $(WINSDL2OBJ)
WINLIB += $(WINSDL2LIB) `pkg-config --libs pangoft2 SDL2_image` `sdl2-config --libs`
LINK=$(CXX)
VARDATND += nhtiles.bmp
endif # WANT_WIN_SDL2

CHOWN=true
CHGRP=true

VARDIRPERM = 0755
VARFILEPERM = 0600
GAMEPERM = 0755
